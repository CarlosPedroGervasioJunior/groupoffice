Skipping module customfields because it's not available.
Skipping module groups because it's not available.
Skipping module links because it's not available.
Skipping module modules because it's not available.
Skipping module search because it's not available.
Skipping module users because it's not available.
[legacy/comments] Excuting query: update core_module set package='community', version=0 where name='comments'
legacy/comments updated from 14 to 15


A module was refactored. Rerunning...

Skipping module customfields because it's not available.
Skipping module groups because it's not available.
Skipping module links because it's not available.
Skipping module modules because it's not available.
Skipping module search because it's not available.
Skipping module users because it's not available.
[legacy/projects2] Excuting query: ALTER TABLE `cf_pr2_projects` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/projects2 updated from 363 to 364
[legacy/projects2] Excuting query: RENAME TABLE `cf_pr2_projects` TO `pr2_projects_custom_fields`;
legacy/projects2 updated from 364 to 365
[legacy/projects2] Excuting query: delete from pr2_projects_custom_fields where id not in (select id from pr2_projects);
legacy/projects2 updated from 365 to 366
[legacy/projects2] Excuting query: ALTER TABLE `pr2_projects_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `pr2_projects`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/projects2 updated from 366 to 367
[legacy/projects2] Excuting query: ALTER TABLE `cf_pr2_hours` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/projects2 updated from 367 to 368
[legacy/projects2] Excuting query: RENAME TABLE `cf_pr2_hours` TO `pr2_hours_custom_fields`;
legacy/projects2 updated from 368 to 369
[legacy/projects2] Excuting query: delete from pr2_hours_custom_fields where id not in (select id from pr2_hours);
legacy/projects2 updated from 369 to 370
[legacy/projects2] Excuting query: ALTER TABLE `pr2_hours_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `pr2_hours`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/projects2 updated from 370 to 371
[legacy/tasks] Excuting query: ALTER TABLE `cf_ta_tasks` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/tasks updated from 55 to 56
[legacy/tasks] Excuting query: RENAME TABLE `cf_ta_tasks` TO `ta_tasks_custom_fields`;
legacy/tasks updated from 56 to 57
[legacy/tasks] Excuting query: delete from ta_tasks_custom_fields where id not in (select id from ta_tasks);
legacy/tasks updated from 57 to 58
[legacy/tasks] Excuting query: ALTER TABLE `ta_tasks_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `ta_tasks`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/tasks updated from 58 to 59
[legacy/site] Excuting query: ALTER TABLE `cf_site_content` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/site updated from 10 to 11
[legacy/site] Excuting query: RENAME TABLE `cf_site_content` TO `site_content_custom_fields`;
legacy/site updated from 11 to 12
[legacy/site] Excuting query: delete from site_content_custom_fields where id not in (select id from site_content);
legacy/site updated from 12 to 13
[legacy/site] Excuting query: ALTER TABLE `site_content_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `site_content`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/site updated from 13 to 14
[legacy/site] Excuting query: ALTER TABLE `cf_site_sites` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/site updated from 14 to 15
[legacy/site] Excuting query: RENAME TABLE `cf_site_sites` TO `site_sites_custom_fields`;
legacy/site updated from 15 to 16
[legacy/site] Excuting query: delete from site_sites_custom_fields where id not in (select id from site_sites);
legacy/site updated from 16 to 17
[legacy/site] Excuting query: ALTER TABLE `site_sites_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `site_sites`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/site updated from 17 to 18
[community/comments] Excuting query: RENAME TABLE `co_comments` TO `comments_comment`;
community/comments updated from 0 to 1
[community/comments] Excuting query: RENAME TABLE `co_categories` TO `comments_label`;
community/comments updated from 1 to 2
[community/comments] Excuting query: CREATE TABLE IF NOT EXISTS `comments_attachment` (
  `commentId` INT NOT NULL,
  `blobId` BINARY(40) NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`commentId`, `blobId`),
  INDEX `fk_comments_attachment_comments_comment1_idx` (`commentId` ASC),
  INDEX `fk_comments_attachment_core_blob1_idx` (`blobId` ASC),
  CONSTRAINT `fk_comments_attachment_comments_comment1`
    FOREIGN KEY (`commentId`)
    REFERENCES `comments_comment` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_comments_attachment_core_blob1`
    FOREIGN KEY (`blobId`)
    REFERENCES `core_blob` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
community/comments updated from 2 to 3
[community/comments] Excuting query: CREATE TABLE IF NOT EXISTS `comments_comment_label` (
  `labelId` INT NOT NULL,
  `commentId` INT NOT NULL,
  PRIMARY KEY (`labelId`, `commentId`),
  INDEX `fk_comments_label_has_comments_comment_comments_comment1_idx` (`commentId` ASC),
  INDEX `fk_comments_label_has_comments_comment_comments_label1_idx` (`labelId` ASC),
  CONSTRAINT `fk_comments_label_has_comments_comment_comments_label1`
    FOREIGN KEY (`labelId`)
    REFERENCES `comments_label` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_comments_label_has_comments_comment_comments_comment1`
    FOREIGN KEY (`commentId`)
    REFERENCES `comments_comment` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
community/comments updated from 3 to 4
[community/comments] Excuting query: ALTER TABLE `comments_label` 
ADD COLUMN `color` CHAR(6) NOT NULL DEFAULT '243a80' AFTER `name`;
community/comments updated from 4 to 5
[community/comments] Excuting query: ALTER TABLE `comments_comment` 
ADD COLUMN `createdAt` DATETIME NOT NULL AFTER `id`,
ADD COLUMN `modifiedBy` INT NULL AFTER `createdBy`,
ADD COLUMN `modifiedAt` DATETIME NULL AFTER `modifiedBy`,
CHANGE COLUMN `model_type_id` `entityTypeId` INT(11) NOT NULL ,
CHANGE COLUMN `model_id` `entityId` INT(11) NOT NULL ,
CHANGE COLUMN `user_id` `createdBy` INT(11) NULL ,
CHANGE COLUMN `comments` `text` MEDIUMTEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL ,
ADD INDEX `fk_comments_comment_core_entity_type_idx` (`entityId` ASC),
ADD INDEX `fk_comments_comment_core_user1_idx` (`createdBy` ASC),
ADD INDEX `fk_comments_comment_core_user2_idx` (`modifiedBy` ASC),
DROP INDEX `link_id` ;
community/comments updated from 5 to 6
[community/comments] Excuting query: SELECT createdAt, modifiedAt FROM comments_comment LIMIT 1;
community/comments updated from 6 to 7
[community/comments] Running callable function
community/comments updated from 7 to 8
[community/comments] Excuting query: UPDATE comments_comment SET createdAt = from_unixtime(ctime), modifiedAt = from_unixtime(mtime);
community/comments updated from 8 to 9
[community/comments] Excuting query: INSERT INTO comments_comment_label (commentId, labelId) SELECT id, category_id FROM comments_comment WHERE category_id != 0;
community/comments updated from 9 to 10
[community/comments] Excuting query: ALTER TABLE `comments_comment` 
DROP COLUMN `category_id`,
DROP COLUMN `mtime`,
DROP COLUMN `ctime`;
community/comments updated from 10 to 11
[legacy/email] Running callable function
legacy/email updated from 97 to 98
[legacy/email] Excuting query: CREATE TABLE `email_template` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `ownedBy` int(11) DEFAULT NULL,
 `aclId` int(11) NOT NULL,
 `name` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
 `subject` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
 `body` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL,
 PRIMARY KEY (`id`),
 UNIQUE KEY `name` (`name`),
 KEY `ownedBy` (`ownedBy`),
 KEY `aclId` (`aclId`),
 CONSTRAINT `email_template_ibfk_1` FOREIGN KEY (`ownedBy`) REFERENCES `core_user` (`id`) ON DELETE CASCADE,
 CONSTRAINT `email_template_ibfk_2` FOREIGN KEY (`aclId`) REFERENCES `core_acl` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT
legacy/email updated from 98 to 99
[legacy/email] Excuting query: CREATE TABLE `email_template_attachment` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `templateId` int(11) NOT NULL,
 `blobId` binary(40) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `templateId` (`templateId`),
 KEY `blobId` (`blobId`),
 CONSTRAINT `email_template_attachment_ibfk_1` FOREIGN KEY (`blobId`) REFERENCES `core_blob` (`id`),
 CONSTRAINT `email_template_attachment_ibfk_2` FOREIGN KEY (`templateId`) REFERENCES `email_template` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT
legacy/email updated from 99 to 100
[legacy/calendar] Excuting query: ALTER TABLE `cf_cal_events` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/calendar updated from 175 to 176
[legacy/calendar] Excuting query: RENAME TABLE `cf_cal_events` TO `cal_events_custom_fields`;
legacy/calendar updated from 176 to 177
[legacy/calendar] Excuting query: delete from cal_events_custom_fields where id not in (select id from cal_events);
legacy/calendar updated from 177 to 178
[legacy/calendar] Excuting query: ALTER TABLE `cal_events_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `cal_events`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/calendar updated from 178 to 179
[legacy/calendar] Excuting query: ALTER TABLE `cf_cal_calendars` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/calendar updated from 179 to 180
[legacy/calendar] Excuting query: RENAME TABLE `cf_cal_calendars` TO `cal_calendars_custom_fields`;
legacy/calendar updated from 180 to 181
[legacy/calendar] Excuting query: delete from cal_calendars_custom_fields where id not in (select id from cal_calendars);
legacy/calendar updated from 181 to 182
[legacy/calendar] Excuting query: ALTER TABLE `cal_calendars_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `cal_calendars`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/calendar updated from 182 to 183
[legacy/addressbook] Excuting query: rename table ab_default_email_templates to email_default_email_templates
legacy/addressbook updated from 307 to 308
[legacy/addressbook] Excuting query: rename table ab_default_email_account_templates to email_default_email_account_templates
legacy/addressbook updated from 308 to 309
[legacy/addressbook] Excuting query: rename table ab_email_templates to go_templates
legacy/addressbook updated from 309 to 310
[legacy/addressbook] Excuting query: update core_module set package='community', version=0, sort_order = sort_order + 100 where name='addressbook'
legacy/addressbook updated from 310 to 311


A module was refactored. Rerunning...

Skipping module customfields because it's not available.
Skipping module groups because it's not available.
Skipping module links because it's not available.
Skipping module modules because it's not available.
Skipping module search because it's not available.
Skipping module users because it's not available.
[community/addressbook] Running callable function
community/addressbook updated from 0 to 1
[community/addressbook] Excuting query: DROP TABLE addressbook_contact_custom_fields
community/addressbook updated from 1 to 2
[legacy/sync] Excuting query: ALTER TABLE `sync_addressbook_user` DROP INDEX `user_id`;
legacy/sync updated from 43 to 44
[legacy/sync] Excuting query: ALTER TABLE `sync_addressbook_user` CHANGE `default_addressbook` `isDefault` BOOLEAN NOT NULL DEFAULT FALSE;
legacy/sync updated from 44 to 45
[legacy/sync] Excuting query: ALTER TABLE `sync_addressbook_user` CHANGE `user_id` `userId` INT(11) NOT NULL;
legacy/sync updated from 45 to 46
[legacy/sync] Excuting query: ALTER TABLE `sync_addressbook_user` CHANGE `addressbook_id` `addressBookId` INT(11) NOT NULL;
legacy/sync updated from 46 to 47
[legacy/sync] Excuting query: DELETE FROM `sync_addressbook_user` where userId not in (select id from core_user);
legacy/sync updated from 47 to 48
[legacy/sync] Excuting query: ALTER TABLE `sync_addressbook_user` ADD FOREIGN KEY (`userId`) REFERENCES `core_user`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/sync updated from 48 to 49
[legacy/bookmarks] Running callable function
legacy/bookmarks updated from 19 to 20
[legacy/tickets] Excuting query: ALTER TABLE `cf_ti_tickets` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/tickets updated from 151 to 152
[legacy/tickets] Excuting query: RENAME TABLE `cf_ti_tickets` TO `ti_tickets_custom_fields`;
legacy/tickets updated from 152 to 153
[legacy/tickets] Excuting query: delete from ti_tickets_custom_fields where id not in (select id from ti_tickets);
legacy/tickets updated from 153 to 154
[legacy/tickets] Excuting query: ALTER TABLE `ti_tickets_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `ti_tickets`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/tickets updated from 154 to 155
[legacy/tickets] Excuting query: ALTER TABLE `ti_tickets` CHANGE `company_id` `company_id` INT(11) NULL DEFAULT NULL;
legacy/tickets updated from 155 to 156
[legacy/tickets] Excuting query: ALTER TABLE `ti_tickets` CHANGE `contact_id` `contact_id` INT(11) NULL DEFAULT NULL;
legacy/tickets updated from 156 to 157
[legacy/tickets] Running callable function
legacy/tickets updated from 157 to 158
[legacy/billing] Excuting query: ALTER TABLE `cf_bs_orders` CHANGE `model_id` `id` INT(11) NOT NULL DEFAULT '0';
legacy/billing updated from 302 to 303
[legacy/billing] Excuting query: RENAME TABLE `cf_bs_orders` TO `bs_orders_custom_fields`;
legacy/billing updated from 303 to 304
[legacy/billing] Excuting query: delete from bs_orders_custom_fields where id not in (select id from bs_orders);
legacy/billing updated from 304 to 305
[legacy/billing] Excuting query: ALTER TABLE `cf_bs_products` CHANGE `model_id` `id` INT(11) NOT NULL DEFAULT '0';
legacy/billing updated from 305 to 306
[legacy/billing] Excuting query: RENAME TABLE `cf_bs_products` TO `bs_products_custom_fields`;
legacy/billing updated from 306 to 307
[legacy/billing] Excuting query: delete from bs_products_custom_fields where id not in (select id from bs_products);
legacy/billing updated from 307 to 308
[legacy/billing] Excuting query: ALTER TABLE `bs_products_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `bs_products`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/billing updated from 308 to 309
[legacy/billing] Excuting query: ALTER TABLE `bs_orders_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `bs_orders`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/billing updated from 309 to 310
[legacy/billing] Running callable function
legacy/billing updated from 310 to 311
[community/comments] Excuting query: UPDATE comments_comment SET text = REPLACE(text, '\n', '<br />');
community/comments updated from 11 to 12
[core/core] Excuting query: UPDATE `core_module` SET `package` = 'community' WHERE `name` = 'serverclient';
core/core updated from 62 to 63
[core/core] Excuting query: update `core_entity` set highestModSeq=0 where highestModSeq is null;
core/core updated from 63 to 64
[core/core] Excuting query: ALTER TABLE `core_entity` CHANGE `highestModSeq` `highestModSeq` INT(11) NOT NULL DEFAULT '0';
core/core updated from 64 to 65
[core/core] Excuting query: truncate table core_change;
core/core updated from 65 to 66
[core/core] Excuting query: DROP TABLE IF EXISTS `core_acl_group_changes`;
core/core updated from 66 to 67
[core/core] Excuting query: CREATE TABLE IF NOT EXISTS `core_acl_group_changes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `aclId` int(11) NOT NULL,
  `groupId` int(11) NOT NULL,
  `grantModSeq` int(11) NOT NULL,
  `revokeModSeq` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `aclId` (`aclId`,`groupId`),
  KEY `group` (`groupId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
core/core updated from 67 to 68
[core/core] Excuting query: ALTER TABLE `core_acl_group_changes`
  ADD CONSTRAINT `all` FOREIGN KEY (`aclId`) REFERENCES `core_acl` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `group` FOREIGN KEY (`groupId`) REFERENCES `core_group` (`id`) ON DELETE CASCADE;
core/core updated from 68 to 69
[core/core] Excuting query: insert into core_acl_group_changes select null, aclId, groupId, COALESCE((select highestModSeq from core_entity where name='Acl'), 0), null from core_acl_group;
core/core updated from 69 to 70
[core/core] Excuting query: ALTER TABLE `core_change`
ADD COLUMN `id` INT NOT NULL AUTO_INCREMENT FIRST,
DROP PRIMARY KEY,
ADD PRIMARY KEY (`id`);
core/core updated from 70 to 71
[core/core] Excuting query: ALTER TABLE `core_blob` ADD `modifiedAt` DATETIME NULL DEFAULT NULL AFTER `createdAt`, ADD `staleAt` DATETIME NULL DEFAULT NULL AFTER `modifiedAt`;
core/core updated from 71 to 72
[core/core] Excuting query: ALTER TABLE `core_blob` ADD INDEX(`staleAt`);
core/core updated from 72 to 73
[core/core] Excuting query: UPDATE `core_blob` set modifiedAt = from_unixtime(modified)
core/core updated from 73 to 74
[core/core] Excuting query: ALTER TABLE `core_blob` DROP `modified`
core/core updated from 74 to 75
[core/core] Excuting query: insert into core_cron_job (moduleId,name, expression, description) values ((select id from core_module where name='core'), 'GarbageCollection', '0 * * * *', 'Garbage collection')
core/core updated from 75 to 76
[core/core] Excuting query: ALTER TABLE `core_customfields_field_set` ADD `filter` TEXT NULL DEFAULT NULL;
core/core updated from 76 to 77
[core/core] Excuting query: ALTER TABLE `core_customfields_field` CHANGE `datatype` `type` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'Text';
core/core updated from 77 to 78
[core/core] Excuting query: ALTER TABLE `core_customfields_field` CHANGE `helptext` `hint` VARCHAR(190) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL;
core/core updated from 78 to 79
[core/core] Excuting query: RENAME TABLE `cf_select_options` TO `core_customfields_select_option`;
core/core updated from 79 to 80
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` CHANGE `field_id` `fieldId` INT(11) NOT NULL;
core/core updated from 80 to 81
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` CHANGE `sort_order` `sortOrder` INT(11) NOT NULL;
core/core updated from 81 to 82
[core/core] Excuting query: delete FROM `core_customfields_select_option` WHERE fieldId not in (select id from core_customfields_field);
core/core updated from 82 to 83
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` ADD FOREIGN KEY (`fieldId`) REFERENCES `core_customfields_field`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
core/core updated from 83 to 84
[core/core] Excuting query: ALTER TABLE `core_customfields_field_set` ADD `description` TEXT NULL AFTER `name`;
core/core updated from 84 to 85
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` ADD `parentId` INT NULL DEFAULT NULL AFTER `fieldId`, ADD INDEX (`parentId`);
core/core updated from 85 to 86
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` ADD FOREIGN KEY (`parentId`) REFERENCES `core_customfields_select_option`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
core/core updated from 86 to 87
[core/core] Excuting query: CREATE TABLE IF NOT EXISTS `core_change_user` (
  `userId` int(11) NOT NULL,
  `entityId` varchar(21) CHARACTER SET ascii COLLATE ascii_bin NOT NULL,
  `entityTypeId` int(11) NOT NULL,
  `modSeq` int(11) NOT NULL,
  PRIMARY KEY (`userId`,`entityId`,`entityTypeId`),
  KEY `entityTypeId` (`entityTypeId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT
core/core updated from 87 to 88
[core/core] Excuting query: ALTER TABLE `core_change_user`
  ADD CONSTRAINT `core_change_user_ibfk_1` FOREIGN KEY (`entityTypeId`) REFERENCES `core_entity` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `core_change_user_ibfk_2` FOREIGN KEY (`userId`) REFERENCES `core_user` (`id`) ON DELETE CASCADE;
core/core updated from 88 to 89
[core/core] Excuting query: ALTER TABLE `core_search` ADD `filter` VARCHAR(50) NULL DEFAULT NULL AFTER `keywords`;
core/core updated from 89 to 90
[core/core] Excuting query: ALTER TABLE `core_search` ADD INDEX(`filter`);
core/core updated from 90 to 91
[core/core] Excuting query: CREATE TABLE IF NOT EXISTS `core_change_user_modseq` (
  `userId` int(11) NOT NULL,
  `entityTypeId` int(11) NOT NULL,
  `highestModSeq` int(11) NOT NULL DEFAULT 0,
  `lowestModSeq` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`userId`,`entityTypeId`),
  KEY `entityTypeId` (`entityTypeId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT;
core/core updated from 91 to 92
[core/core] Excuting query: ALTER TABLE `core_change_user_modseq`
  ADD CONSTRAINT `core_change_user_modseq_ibfk_1` FOREIGN KEY (`entityTypeId`) REFERENCES `core_entity` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `core_change_user_modseq_ibfk_2` FOREIGN KEY (`userId`) REFERENCES `core_user` (`id`) ON DELETE CASCADE;
core/core updated from 92 to 93
[core/core] Excuting query: ALTER TABLE `core_customfields_field` CHANGE `databaseName` `databaseName` VARCHAR(190) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL;
core/core updated from 93 to 94
[core/core] Running callable function
core/core updated from 94 to 95
[core/core] Excuting query: UPDATE core_module set sort_order = sort_order + 100 where package != 'core' or package is null;
core/core updated from 95 to 96
[core/core] Excuting query: ALTER TABLE `core_customfields_select_option` DROP `sortOrder`;
core/core updated from 96 to 97
[core/core] Excuting query: CREATE TABLE IF NOT EXISTS `go_templates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL DEFAULT 0,
  `type` tinyint(4) NOT NULL DEFAULT 0,
  `name` varchar(100) DEFAULT NULL,
  `acl_id` int(11) NOT NULL DEFAULT 0,
  `content` longblob NOT NULL,
  `extension` varchar(4) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
core/core updated from 97 to 98
[core/core] Running callable function
core/core updated from 98 to 99
[core/core] Running callable function
Migrating custom fields for entity: User
core/core updated from 99 to 100
[core/core] Excuting query: delete from core_setting where moduleId = 0;
core/core updated from 100 to 101
[core/core] Excuting query: update `core_entity` e inner join core_module m on m.id = e.moduleId  set e.moduleId = (select id from core_module where name = 'core' and package='core') where m.package='core';
core/core updated from 101 to 102
[core/core] Excuting query: update `core_setting` e inner join core_module m on m.id = e.moduleId  set e.moduleId = (select id from core_module where name = 'core' and package='core') where m.package='core';
core/core updated from 102 to 103
[core/core] Excuting query: update `core_auth_method` e inner join core_module m on m.id = e.moduleId  set e.moduleId = (select id from core_module where name = 'core' and package='core') where m.package='core';
core/core updated from 103 to 104
[core/core] Excuting query: delete from core_module where package = 'core' and name != 'core';
core/core updated from 104 to 105
[core/core] Excuting query: ALTER TABLE `core_change` DROP FOREIGN KEY `core_change_ibfk_2`;
core/core updated from 105 to 106
[core/core] Excuting query: ALTER TABLE `core_change` ADD CONSTRAINT `core_change_ibfk_2` FOREIGN KEY (`aclId`) REFERENCES `core_acl`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
core/core updated from 106 to 107
[core/core] Excuting query: ALTER TABLE `core_change_user` CHANGE `entityId` `entityId` INT NOT NULL;
core/core updated from 107 to 108
[legacy/files] Excuting query: ALTER TABLE `cf_fs_folders` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/files updated from 115 to 116
[legacy/files] Excuting query: RENAME TABLE `cf_fs_folders` TO `fs_folders_custom_fields`;
legacy/files updated from 116 to 117
[legacy/files] Excuting query: delete from fs_folders_custom_fields where id not in (select id from fs_folders);
legacy/files updated from 117 to 118
[legacy/files] Excuting query: ALTER TABLE `fs_folders_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `fs_folders`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/files updated from 118 to 119
[legacy/files] Excuting query: ALTER TABLE `cf_fs_files` CHANGE `model_id` `id` INT(11) NOT NULL;
legacy/files updated from 119 to 120
[legacy/files] Excuting query: RENAME TABLE `cf_fs_files` TO `fs_files_custom_fields`;
legacy/files updated from 120 to 121
[legacy/files] Excuting query: delete from fs_files_custom_fields where id not in (select id from fs_files);
legacy/files updated from 121 to 122
[legacy/files] Excuting query: ALTER TABLE `fs_files_custom_fields` ADD FOREIGN KEY (`id`) REFERENCES `fs_files`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
legacy/files updated from 122 to 123
[core/core] Excuting query: ALTER TABLE `core_entity` ADD `defaultAclId` INT NULL DEFAULT NULL AFTER `highestModSeq`;
core/core updated from 108 to 109
[core/core] Excuting query: ALTER TABLE `core_entity` ADD FOREIGN KEY (`defaultAclId`) REFERENCES `core_acl`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
core/core updated from 109 to 110
[core/core] Excuting query: CREATE TABLE `core_entity_filter` (
  `id` int(11) NOT NULL,
  `entityTypeId` int(11) NOT NULL,
  `name` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
  `createdBy` int(11) NOT NULL,
  `filter` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `aclId` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT;
core/core updated from 110 to 111
[core/core] Excuting query: ALTER TABLE `core_entity_filter`
  ADD PRIMARY KEY (`id`),
  ADD KEY `aclid` (`aclId`),
  ADD KEY `createdBy` (`createdBy`),
  ADD KEY `entityTypeId` (`entityTypeId`);
core/core updated from 111 to 112
[core/core] Excuting query: ALTER TABLE `core_entity_filter`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 112 to 113
[core/core] Excuting query: ALTER TABLE `core_entity_filter`
  ADD CONSTRAINT `core_entity_filter_ibfk_1` FOREIGN KEY (`aclId`) REFERENCES `core_acl` (`id`),
	ADD CONSTRAINT `core_entity_filter_ibfk_2` FOREIGN KEY (`entityTypeId`) REFERENCES `core_entity` (`id`) ON DELETE CASCADE;
core/core updated from 113 to 114
[core/core] Excuting query: ALTER TABLE `core_customfields_field_set` ADD `isTab` BOOLEAN NOT NULL DEFAULT FALSE AFTER `filter`;
core/core updated from 114 to 115
[community/notes] Running callable function
Migrating custom fields for entity: Note
community/notes updated from 35 to 36
[legacy/billing] Running callable function
Migrating custom fields for entity: Order
31 - Text
Migrating custom fields for entity: Product
32 - Text
legacy/billing updated from 302 to 312
[legacy/calendar] Running callable function
Migrating custom fields for entity: Event
33 - Text
Migrating custom fields for entity: Calendar
34 - Text
legacy/calendar updated from 183 to 184
[legacy/files] Running callable function
Migrating custom fields for entity: File
35 - Text
Migrating custom fields for entity: Folder
36 - Text
legacy/files updated from 115 to 124
[legacy/projects2] Running callable function
Migrating custom fields for entity: Project
37 - Text
Migrating custom fields for entity: TimeEntry
38 - Text
legacy/projects2 updated from 371 to 372
[legacy/projects2] Running callable function
legacy/projects2 updated from 372 to 373
[legacy/tasks] Running callable function
Migrating custom fields for entity: Task
39 - Text
legacy/tasks updated from 59 to 60
[legacy/tickets] Running callable function
Migrating custom fields for entity: Ticket
40 - Text
legacy/tickets updated from 151 to 159
[core/core] Excuting query: ALTER TABLE `core_search` CHANGE `description` `description` VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL;
core/core updated from 115 to 116
[community/addressbook] Running callable function
Migrating custom fields
DELETE FROM `t` USING `addressbook_contact_custom_fields` AS `t` 
WHERE 
 id not in (select id from ab_contacts)
ALTER TABLE addressbook_contact_custom_fields ADD `Company_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `Contact_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `File_1` VARCHAR(255) NOT NULL DEFAULT '',
ADD `Checkbox_1` TINYINT(1) NOT NULL DEFAULT FALSE,
ADD `Number_1` DOUBLE NULL,
ADD `User_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `HTML_1` TEXT NULL,
ADD `Infotext_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `Heading_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `Select_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `Treeselect_1` VARCHAR(190) NOT NULL DEFAULT '',
ADD `Textarea_1` TEXT NULL,
ADD `Date_1` DATE NULL,
ADD `Function_1` DOUBLE NULL,
ADD `Text_1` VARCHAR(190) NOT NULL DEFAULT '';

INSERT IGNORE INTO `addressbook_contact_custom_fields`  (`id`, `Company_1`, `Contact_1`, `File_1`, `Checkbox_1`, `Number_1`, `User_1`, `HTML_1`, `Infotext_1`, `Heading_1`, `Select_1`, `Treeselect_1`, `Textarea_1`, `Date_1`, `Function_1`, `Text_1`)
 SELECT (`model_id` + 11) as id, `Company`, `Contact`, `File`, `Checkbox`, `Number`, `User`, `HTML`, `Infotext`, `Heading`, `Select`, `Treeselect`, `Textarea`, `Date`, `Function`, `Text` 
FROM `cf_ab_companies` `cf`
INNER JOIN `ab_companies` `c` ON 
 c.id=cf.model_id
WHERE 
 model_id in (select id from ab_companies)
Migrating links
Migrating addressbook Prospects
..
Migrating addressbook Customers
.....
Migrating addressbook Users
.....
Migrating addressbook __ORPHANED__
...
Migrating custom fields for entity: Contact
1 - Company
2 - Contact
3 - File
4 - Checkbox
5 - Number
6 - User
7 - Html
8 - Infotext
9 - Heading
10 - Select
11 - Treeselect
12 - Textarea
13 - Date
14 - FunctionField
15 - Text
16 - Company
17 - Contact
18 - File
19 - Checkbox
20 - Number
21 - User
22 - Html
23 - Infotext
24 - Heading
25 - Select
26 - Treeselect
...27 - Textarea
28 - Date
29 - FunctionField
30 - Text
41 - TreeselectSlave
42 - TreeselectSlave
43 - Select
..Migrating address book custom field types
Migrating Company_1
Migrating Contact_1
Migrating Company
Migrating Contact
Migrated 15 contacts and organizations
community/addressbook updated from 2 to 3
[community/addressbook] Excuting query: CREATE TABLE IF NOT EXISTS `addressbook_user_settings` (
  `userId` int(11) NOT NULL,
  `defaultAddressBookId` int(11) DEFAULT NULL,
  PRIMARY KEY (`userId`),
  KEY `defaultAddressBookId` (`defaultAddressBookId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT;
community/addressbook updated from 3 to 4
[core/core] Excuting query: ALTER TABLE `core_auth_password` DROP `digest`;
core/core updated from 116 to 117
[core/core] Excuting query: CREATE TABLE `core_smtp_account` (
  `id` int(11) NOT NULL,
  `moduleId` int(11) NOT NULL,
  `aclId` int(11) NOT NULL,
  `hostname` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
  `port` int(11) NOT NULL DEFAULT 587,
  `username` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `password` text COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `encryption` enum('tls','ssl') COLLATE utf8mb4_unicode_ci DEFAULT 'tls',
  `verifyCertificate` tinyint(1) NOT NULL DEFAULT 1,
  `fromName` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
  `fromEmail` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
core/core updated from 117 to 118
[core/core] Excuting query: ALTER TABLE `core_smtp_account`
  ADD PRIMARY KEY (`id`),
  ADD KEY `moduleId` (`moduleId`),
  ADD KEY `aclId` (`aclId`);
core/core updated from 118 to 119
[core/core] Excuting query: ALTER TABLE `core_smtp_account`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 119 to 120
[core/core] Excuting query: ALTER TABLE `core_smtp_account`
  ADD CONSTRAINT `core_smtp_account_ibfk_1` FOREIGN KEY (`moduleId`) REFERENCES `core_module` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `core_smtp_account_ibfk_2` FOREIGN KEY (`aclId`) REFERENCES `core_acl` (`id`);
core/core updated from 120 to 121
[core/core] Excuting query: CREATE TABLE `core_email_template` (
  `id` int(11) NOT NULL,
  `moduleId` int(11) NOT NULL,
  `aclId` int(11) NOT NULL,
  `name` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
  `subject` varchar(190) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `body` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT;
core/core updated from 121 to 122
[core/core] Excuting query: CREATE TABLE `core_email_template_attachment` (
  `id` int(11) NOT NULL,
  `emailTemplateId` int(11) NOT NULL,
  `blobId` binary(40) NOT NULL,
  `name` varchar(190) COLLATE utf8mb4_unicode_ci NOT NULL,
  `inline` tinyint(1) NOT NULL DEFAULT 0,
  `attachment` tinyint(1) NOT NULL DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=COMPACT;
core/core updated from 122 to 123
[core/core] Excuting query: ALTER TABLE `core_email_template`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `name` (`name`),
  ADD KEY `aclId` (`aclId`),
  ADD KEY `moduleId` (`moduleId`);
core/core updated from 123 to 124
[core/core] Excuting query: ALTER TABLE `core_email_template_attachment`
  ADD PRIMARY KEY (`id`),
  ADD KEY `templateId` (`emailTemplateId`),
  ADD KEY `blobId` (`blobId`);
core/core updated from 124 to 125
[core/core] Excuting query: ALTER TABLE `core_email_template`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 125 to 126
[core/core] Excuting query: ALTER TABLE `core_email_template_attachment`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 126 to 127
[core/core] Excuting query: ALTER TABLE `core_email_template`
  ADD CONSTRAINT `core_email_template_ibfk_1` FOREIGN KEY (`aclId`) REFERENCES `core_acl` (`id`),
  ADD CONSTRAINT `core_email_template_ibfk_2` FOREIGN KEY (`moduleId`) REFERENCES `core_module` (`id`) ON DELETE CASCADE;
core/core updated from 127 to 128
[core/core] Excuting query: ALTER TABLE `core_email_template_attachment`
  ADD CONSTRAINT `core_email_template_attachment_ibfk_1` FOREIGN KEY (`blobId`) REFERENCES `core_blob` (`id`),
  ADD CONSTRAINT `core_email_template_attachment_ibfk_2` FOREIGN KEY (`emailTemplateId`) REFERENCES `core_email_template` (`id`) ON DELETE CASCADE;
core/core updated from 128 to 129
[legacy/email] Excuting query: DROP TABLE `email_template_attachment`;
legacy/email updated from 100 to 101
[legacy/email] Excuting query: DROP TABLE `email_template`;
legacy/email updated from 101 to 102
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` DROP FOREIGN KEY `addressbook_contact_ibfk_1`;
community/addressbook updated from 4 to 5
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD CONSTRAINT `addressbook_contact_ibfk_1` FOREIGN KEY (`addressBookId`) REFERENCES `addressbook_addressbook`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
community/addressbook updated from 5 to 6
[community/addressbook] Excuting query: ALTER TABLE `addressbook_group` DROP FOREIGN KEY `addressbook_group_ibfk_1`;
community/addressbook updated from 6 to 7
[community/addressbook] Excuting query: ALTER TABLE `addressbook_group` ADD CONSTRAINT `addressbook_group_ibfk_1` FOREIGN KEY (`addressBookId`) REFERENCES `addressbook_addressbook`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
community/addressbook updated from 7 to 8
[core/core] Excuting query: ALTER TABLE `core_acl` ADD `entityTypeId` INT NULL DEFAULT NULL AFTER `modifiedAt`, ADD `entityId` INT NULL DEFAULT NULL AFTER `entityTypeId`;
core/core updated from 129 to 130
[core/core] Running callable function
core/core updated from 130 to 131
[community/notes] Excuting query: ALTER TABLE `notes_note` DROP FOREIGN KEY `notes_note_ibfk_1`;
community/notes updated from 36 to 37
[community/notes] Excuting query: ALTER TABLE `notes_note` ADD CONSTRAINT `notes_note_ibfk_1` FOREIGN KEY (`noteBookId`) REFERENCES `notes_note_book`(`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
community/notes updated from 37 to 38
[legacy/bookmarks] Running callable function
legacy/bookmarks updated from 19 to 21
[legacy/bookmarks] Running callable function
legacy/bookmarks updated from 21 to 22
[legacy/bookmarks] Excuting query: update core_entity set clientName='BookmarksCategory' where name='Category' and moduleId=(select id from core_module where name='bookmarks' and package='community')
legacy/bookmarks updated from 19 to 23
[legacy/bookmarks] Excuting query: update core_module set package='community', version=0, sort_order = sort_order + 100 where name='bookmarks'
legacy/bookmarks updated from 23 to 24


A module was refactored. Rerunning...

[community/addressbook] Excuting query: ALTER TABLE `addressbook_email_address` DROP FOREIGN KEY addressbook_email_address_ibfk_1;
community/addressbook updated from 8 to 9
[community/addressbook] Excuting query: ALTER TABLE `addressbook_email_address` CHANGE `id` `id` INT(11) NOT NULL;
community/addressbook updated from 9 to 10
[community/addressbook] Excuting query: ALTER TABLE `addressbook_email_address` DROP PRIMARY KEY;
community/addressbook updated from 10 to 11
[community/addressbook] Excuting query: ALTER TABLE `addressbook_email_address` DROP `id`;
community/addressbook updated from 11 to 12
[community/addressbook] Excuting query: ALTER TABLE `addressbook_email_address` ADD FOREIGN KEY (`contactId`) REFERENCES `addressbook_contact`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
community/addressbook updated from 12 to 13
[community/addressbook] Excuting query: ALTER TABLE `addressbook_phone_number` DROP `id`;
community/addressbook updated from 13 to 14
[community/addressbook] Excuting query: ALTER TABLE `addressbook_date` DROP `id`;
community/addressbook updated from 14 to 15
[community/addressbook] Excuting query: ALTER TABLE addressbook_url DROP FOREIGN KEY addressbook_url_ibfk_1;
community/addressbook updated from 15 to 16
[community/addressbook] Excuting query: ALTER TABLE `addressbook_url` CHANGE `id` `id` INT(11) NOT NULL;
community/addressbook updated from 16 to 17
[community/addressbook] Excuting query: ALTER TABLE `addressbook_url` DROP PRIMARY KEY;
community/addressbook updated from 17 to 18
[community/addressbook] Excuting query: ALTER TABLE `addressbook_url` DROP `id`;
community/addressbook updated from 18 to 19
[community/addressbook] Excuting query: ALTER TABLE `addressbook_url` ADD FOREIGN KEY (`contactId`) REFERENCES `addressbook_contact`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
community/addressbook updated from 19 to 20
[community/addressbook] Excuting query: ALTER TABLE `addressbook_address` DROP `id`
community/addressbook updated from 20 to 21
[community/addressbook] Excuting query: DELETE FROM core_entity WHERE moduleId = (select id from core_module where name='addressbook' and package='community') and name='Addresslist';
community/addressbook updated from 21 to 22
[core/core] Excuting query: ALTER TABLE `core_search` DROP INDEX `keywords`;
core/core updated from 131 to 132
[core/core] Excuting query: ALTER TABLE `core_search` CHANGE `keywords` `keywords` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '';
core/core updated from 132 to 133
[core/core] Excuting query: ALTER TABLE `core_search` DROP INDEX `name`;
core/core updated from 133 to 134
[core/core] Excuting query: ALTER TABLE `core_search` CHANGE `name` `name` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL;
core/core updated from 134 to 135
[core/core] Excuting query: 
core/core updated from 135 to 136
[core/core] Excuting query: ALTER TABLE `core_acl` DROP FOREIGN KEY `core_acl_ibfk_1`;
core/core updated from 136 to 137
[core/core] Excuting query: ALTER TABLE `core_acl` ADD CONSTRAINT `core_acl_ibfk_1` FOREIGN KEY (`entityTypeId`) REFERENCES `core_entity`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
core/core updated from 137 to 138
[community/comments] Excuting query: ALTER TABLE `comments_comment` CHANGE `createdBy` `createdBy` INT(11) NULL;
community/comments updated from 12 to 13
[community/comments] Excuting query: ALTER TABLE `comments_comment` DROP FOREIGN KEY `fk_comments_comment_core_user1`
community/comments updated from 13 to 14
[community/comments] Excuting query: ALTER TABLE `comments_comment` ADD CONSTRAINT `fk_comments_comment_core_user1` FOREIGN KEY (`createdBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE NO ACTION
community/comments updated from 14 to 15
[community/comments] Excuting query: ALTER TABLE `comments_comment` DROP FOREIGN KEY `fk_comments_comment_core_user2`
community/comments updated from 15 to 16
[community/comments] Excuting query: ALTER TABLE `comments_comment` ADD CONSTRAINT `fk_comments_comment_core_user2` FOREIGN KEY (`modifiedBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE NO ACTION
community/comments updated from 16 to 17
[community/addressbook] Excuting query: update `addressbook_contact_star` set starred = null where starred = 0;
community/addressbook updated from 22 to 23
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact_star` CHANGE `starred` `starred` TINYINT(1) NULL DEFAULT NULL;
community/addressbook updated from 23 to 24
[core/core] Running callable function
core/core updated from 138 to 139
[core/core] Running callable function
core/core updated from 139 to 140
[legacy/email] Excuting query: DELETE FROM go_state WHERE name='em-pnl-west'
legacy/email updated from 102 to 103
[community/addressbook] Excuting query: ALTER TABLE `addressbook_user_settings` ADD `salutationTemplate` TEXT NOT NULL AFTER `defaultAddressBookId`, ADD `sortBy` ENUM('name','lastName') NOT NULL DEFAULT 'name' AFTER `salutationTemplate`;
community/addressbook updated from 24 to 25
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_bookmark` CHANGE `createdBy` `createdBy` INT(11) NULL DEFAULT NULL;
community/bookmarks updated from 0 to 1
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_category` CHANGE `createdBy` `createdBy` INT(11) NULL DEFAULT NULL;
community/bookmarks updated from 1 to 2
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_bookmark` DROP FOREIGN KEY `bookmarks_user_ibfk_2`;
community/bookmarks updated from 2 to 3
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_bookmark` DROP FOREIGN KEY `bookmarks_bookmark_ibfk_1`
community/bookmarks updated from 3 to 4
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_bookmark` ADD CONSTRAINT `bookmarks_bookmark_ibfk_1` FOREIGN KEY (`createdBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
community/bookmarks updated from 4 to 5
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_category` DROP FOREIGN KEY `bookmarks_category_user_ibfk_2`;
community/bookmarks updated from 5 to 6
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_category` DROP FOREIGN KEY `bookmarks_category_ibfk_2`;
community/bookmarks updated from 6 to 7
[community/bookmarks] Excuting query: ALTER TABLE `bookmarks_category` ADD CONSTRAINT `bookmarks_category_ibfk_2` FOREIGN KEY (`createdBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
community/bookmarks updated from 7 to 8
[community/comments] Excuting query: 
community/comments updated from 17 to 18
[community/comments] Excuting query: ALTER TABLE `comments_comment` ADD `section` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL AFTER `text`;
community/comments updated from 18 to 19
[community/comments] Excuting query: ALTER TABLE `comments_comment` ADD INDEX(`section`);
community/comments updated from 19 to 20
[community/addressbook] Excuting query: ALTER TABLE `addressbook_addressbook` ADD `filesFolderId` INT NULL DEFAULT NULL AFTER `createdBy`;
community/addressbook updated from 25 to 26
[community/addressbook] Excuting query: ALTER TABLE `addressbook_addressbook` ADD `salutationTemplate` TEXT NULL AFTER `filesFolderId`;
community/addressbook updated from 26 to 27
[community/addressbook] Excuting query: ALTER TABLE `addressbook_user_settings` DROP `salutationTemplate`;
community/addressbook updated from 27 to 28
[core/core] Running callable function
Checking custom field 1
Checking custom field 2
Checking custom field 3
Checking custom field 4
Checking custom field 5
Checking custom field 6
Checking custom field 7
Checking custom field 8
Checking custom field 9
Checking custom field 10
Checking custom field 11
Checking custom field 12
Checking custom field 13
Checking custom field 14
Checking custom field 15
Checking custom field 16
Checking custom field 17
Checking custom field 18
Checking custom field 19
Checking custom field 20
Checking custom field 21
Checking custom field 22
Checking custom field 23
Checking custom field 24
Checking custom field 25
Checking custom field 26
Checking custom field 27
Checking custom field 28
Checking custom field 29
Checking custom field 30
Checking custom field 31
Checking custom field 32
Checking custom field 33
Checking custom field 34
Checking custom field 35
Checking custom field 36
Checking custom field 37
Checking custom field 38
Checking custom field 39
Checking custom field 40
Checking custom field 43
core/core updated from 140 to 141
[core/core] Excuting query: DELETE FROM core_setting WHERE moduleId=0
core/core updated from 141 to 142
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD `initials` VARCHAR(50) DEFAULT NULL AFTER `prefixes`;
community/addressbook updated from 28 to 29
[community/addressbook] Running callable function
UPDATE `addressbook_contact` `t`
INNER JOIN `ab_contacts` `old` ON 
 old.id = t.id
SET
	`t`.`initials` = old.initials
community/addressbook updated from 29 to 30
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD `salutation` VARCHAR(100) NULL DEFAULT NULL AFTER `suffixes`;
community/addressbook updated from 30 to 31
[community/addressbook] Running callable function
UPDATE `addressbook_contact` `t`
INNER JOIN `ab_contacts` `old` ON 
 old.id = t.id
SET
	`t`.`salutation` = old.salutation
community/addressbook updated from 31 to 32
[community/addressbook] Running callable function
community/addressbook updated from 32 to 33
[community/notes] Excuting query: CREATE TABLE `notes_user_settings` (
  `userId` int(11) NOT NULL,
  `defaultNoteBookId` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
community/notes updated from 38 to 39
[community/notes] Excuting query: ALTER TABLE `notes_user_settings`
  ADD PRIMARY KEY (`userId`),
  ADD KEY `defaultNoteBookId` (`defaultNoteBookId`);
community/notes updated from 39 to 40
[community/notes] Excuting query: ALTER TABLE `notes_user_settings`
  ADD CONSTRAINT `notes_user_settings_ibfk_1` FOREIGN KEY (`defaultNoteBookId`) REFERENCES `notes_note_book` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `notes_user_settings_ibfk_2` FOREIGN KEY (`userId`) REFERENCES `core_user` (`id`) ON DELETE CASCADE;
community/notes updated from 40 to 41
[community/addressbook] Excuting query: delete from `addressbook_contact` WHERE addressBookId = (select value from core_setting where name="userAddressBookId") and firstName = "" and lastName = "" and name = "" and isOrganization = 0 and goUserId is null
community/addressbook updated from 33 to 34
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` DROP FOREIGN KEY `addressbook_contact_ibfk_3`;
community/addressbook updated from 34 to 35
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD CONSTRAINT `addressbook_contact_ibfk_3` FOREIGN KEY (`modifiedBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
community/addressbook updated from 35 to 36
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` CHANGE `createdBy` `createdBy` INT(11) NULL DEFAULT NULL;
community/addressbook updated from 36 to 37
[community/addressbook] Excuting query: ALTER TABLE `addressbook_addressbook` CHANGE `createdBy` `createdBy` INT(11) NULL DEFAULT NULL;
community/addressbook updated from 37 to 38
[community/addressbook] Excuting query: UPDATE addressbook_addressbook set createdBy=null where createdBy not in (select id from core_user);
community/addressbook updated from 38 to 39
[community/addressbook] Excuting query: ALTER TABLE `addressbook_addressbook` ADD FOREIGN KEY (`createdBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
community/addressbook updated from 39 to 40
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` DROP FOREIGN KEY `addressbook_contact_ibfk_4`; 
community/addressbook updated from 40 to 41
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD CONSTRAINT `addressbook_contact_ibfk_4` FOREIGN KEY (`createdBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
community/addressbook updated from 41 to 42
[core/core] Excuting query: insert ignore into core_group (id, name) values (3, "Internal");
core/core updated from 142 to 143
[core/core] Excuting query: ALTER TABLE `core_change` ADD INDEX(`entityId`);
core/core updated from 143 to 144
[core/core] Excuting query: ALTER TABLE `core_search` CHANGE `keywords` `keywords` VARCHAR(190) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL;
core/core updated from 144 to 145
[core/core] Excuting query: ALTER TABLE `core_search` DROP INDEX `name`;
core/core updated from 145 to 146
[core/core] Excuting query: ALTER TABLE `core_search` ADD INDEX(`keywords`);
core/core updated from 146 to 147
[legacy/billing] Excuting query: ALTER TABLE `bs_orders` CHANGE `contact_id` `contact_id` INT(11) NULL DEFAULT NULL;
legacy/billing updated from 312 to 313
[legacy/billing] Excuting query: update bs_orders set contact_id = null where contact_id not in (select id from addressbook_contact);
legacy/billing updated from 313 to 314
[legacy/billing] Excuting query: ALTER TABLE `bs_orders` ADD FOREIGN KEY (`contact_id`) REFERENCES `addressbook_contact`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
legacy/billing updated from 314 to 315
[legacy/billing] Excuting query: ALTER TABLE `bs_orders` CHANGE `company_id` `company_id` INT(11) NULL DEFAULT NULL;
legacy/billing updated from 315 to 316
[legacy/billing] Excuting query: update bs_orders set company_id = null where company_id not in (select id from addressbook_contact);
legacy/billing updated from 316 to 317
[legacy/billing] Excuting query: ALTER TABLE `bs_orders` ADD FOREIGN KEY (`company_id`) REFERENCES `addressbook_contact`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
legacy/billing updated from 317 to 318
[legacy/projects2] Excuting query: ALTER TABLE `pr2_projects` CHANGE `contact_id` `contact_id` INT(11) NULL DEFAULT NULL;
legacy/projects2 updated from 373 to 374
[legacy/projects2] Excuting query: update pr2_projects set contact_id = null where contact_id not in (select id from addressbook_contact);
legacy/projects2 updated from 374 to 375
[legacy/projects2] Excuting query: ALTER TABLE `pr2_projects` ADD FOREIGN KEY (`contact_id`) REFERENCES `addressbook_contact`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
legacy/projects2 updated from 375 to 376
[legacy/projects2] Excuting query: ALTER TABLE `pr2_projects` CHANGE `company_id` `company_id` INT(11) NULL DEFAULT NULL;
legacy/projects2 updated from 376 to 377
[legacy/projects2] Excuting query: update pr2_projects set company_id = null where company_id not in (select id from addressbook_contact);
legacy/projects2 updated from 377 to 378
[legacy/projects2] Excuting query: ALTER TABLE `pr2_projects` ADD FOREIGN KEY (`company_id`) REFERENCES `addressbook_contact`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
legacy/projects2 updated from 378 to 379
[legacy/projects2] Excuting query: ALTER TABLE `pr2_expense_budgets` CHANGE `contact_id` `contact_id` INT(11) NULL DEFAULT NULL;
legacy/projects2 updated from 379 to 380
[legacy/projects2] Excuting query: update pr2_expense_budgets set contact_id = null where contact_id not in (select id from addressbook_contact);
legacy/projects2 updated from 380 to 381
[legacy/projects2] Excuting query: ALTER TABLE `pr2_expense_budgets` ADD FOREIGN KEY (`contact_id`) REFERENCES `addressbook_contact`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
legacy/projects2 updated from 381 to 382
[community/addressbook] Excuting query: update `addressbook_contact` set lastName = null, firstName = null, middleName = null, suffixes = null, prefixes = null, modifiedAt = now() where isOrganization = true;
community/addressbook updated from 42 to 43
[core/core] Excuting query: ALTER TABLE `core_auth_token` CHANGE `expiresAt` `expiresAt` DATETIME NULL DEFAULT NULL;
core/core updated from 147 to 148
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD INDEX(`isOrganization`)
community/addressbook updated from 43 to 44
[core/core] Excuting query: ALTER TABLE `core_customfields_field` ADD `requiredCondition` varchar(255) NOT NULL DEFAULT '' AFTER `required`
core/core updated from 148 to 149
[core/core] Excuting query: update`core_user` set `displayName` = `username` where displayName = '' or displayName is null
core/core updated from 149 to 150
[core/core] Excuting query: ALTER TABLE `core_user` CHANGE `displayName` `displayName` VARCHAR(190) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;
core/core updated from 150 to 151
[legacy/files] Excuting query: delete FROM `go_state` WHERE `name` LIKE 'popupfb%'
legacy/files updated from 124 to 125
[legacy/projects2] Excuting query: ALTER TABLE `pr2_templates` ADD `show_in_tree` BOOLEAN NOT NULL DEFAULT FALSE AFTER `name_template`;
legacy/projects2 updated from 373 to 383
[legacy/projects2] Excuting query: update `pr2_templates` set show_in_tree=true where project_type != 1;
legacy/projects2 updated from 383 to 384
[legacy/tickets] Excuting query: ALTER TABLE `ti_statuses` ADD `type_id` INT NULL AFTER `user_id`;
legacy/tickets updated from 159 to 160
[core/core] Excuting query: ALTER TABLE `core_user` CHANGE `theme` `theme` VARCHAR(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'Paper';
core/core updated from 151 to 152
[core/core] Excuting query: update `core_user` set theme='Paper' where theme='Default';
core/core updated from 152 to 153
[core/core] Excuting query: CREATE TABLE `core_auth_allow_group` (
`id` int(11) NOT NULL,
  `groupId` int(11) NOT NULL,
  `ipPattern` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'IP Address. Wildcards can be used where * matches anything and ? matches exactly one character'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
core/core updated from 153 to 154
[core/core] Excuting query: ALTER TABLE `core_auth_allow_group`
  ADD PRIMARY KEY (`id`),
  ADD KEY `groupId` (`groupId`);
core/core updated from 154 to 155
[core/core] Excuting query: ALTER TABLE `core_auth_allow_group`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 155 to 156
[core/core] Excuting query: ALTER TABLE `core_auth_allow_group`
  ADD CONSTRAINT `core_auth_allow_group_ibfk_1` FOREIGN KEY (`groupId`) REFERENCES `core_group` (`id`) ON DELETE CASCADE;
core/core updated from 156 to 157
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD `color` CHAR(6) NULL DEFAULT NULL AFTER `uri`;
community/addressbook updated from 44 to 45
[core/core] Excuting query: ALTER TABLE `core_customfields_field` 
  ADD `conditionallyHidden` tinyint(1) NOT NULL DEFAULT '0' AFTER `requiredCondition`
core/core updated from 157 to 158
[core/core] Excuting query: ALTER TABLE `core_customfields_field` CHANGE `requiredCondition` `relatedFieldCondition` varchar(190) NOT NULL DEFAULT '' AFTER `required`
core/core updated from 158 to 159
[core/core] Excuting query: ALTER TABLE `core_customfields_field` ADD `conditionallyHidden` BOOLEAN NOT NULL DEFAULT FALSE AFTER `relatedFieldCondition`
core/core updated from 159 to 160
[core/core] Excuting query: ALTER TABLE `core_customfields_field` ADD `conditionallyRequired` BOOLEAN NOT NULL DEFAULT FALSE AFTER `conditionallyHidden`
core/core updated from 160 to 161
[community/addressbook] Excuting query: update addressbook_contact set uri = null where uri = ".vcf" and uid is null;
community/addressbook updated from 45 to 46
[community/addressbook] Excuting query: update addressbook_contact set uri = concat(uid, ".vcf") where uri = '.vcf' and uid is not null
community/addressbook updated from 46 to 47
[core/core] Excuting query: ALTER TABLE `core_link` ADD INDEX(`fromEntityTypeId`);
core/core updated from 161 to 162
[core/core] Excuting query: ALTER TABLE `core_link` ADD INDEX(`fromId`);
core/core updated from 162 to 163
[core/core] Excuting query: ALTER TABLE `core_link` ADD INDEX(`toEntityTypeId`);
core/core updated from 163 to 164
[core/core] Excuting query: ALTER TABLE `core_link` ADD INDEX(`toId`);
core/core updated from 164 to 165
[legacy/email] Excuting query: ALTER TABLE `em_contacts_last_mail_times` ADD INDEX(`last_mail_time`);
legacy/email updated from 102 to 104
[community/addressbook] Excuting query: ALTER TABLE addressbook_contact ADD nameBank varchar(50);
community/addressbook updated from 47 to 48
[community/addressbook] Excuting query: ALTER TABLE addressbook_contact ADD BIC varchar(11);
community/addressbook updated from 48 to 49
[community/notes] Excuting query: CREATE TABLE `notes_note_image` (
`noteId` int(11) NOT NULL,
  `blobId` binary(40) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
community/notes updated from 41 to 42
[community/notes] Excuting query: ALTER TABLE `notes_note_image`
  ADD PRIMARY KEY (`noteId`,`blobId`),
  ADD KEY `blobId` (`blobId`);
community/notes updated from 42 to 43
[community/notes] Excuting query: ALTER TABLE `notes_note_image`
  ADD CONSTRAINT `notes_note_image_ibfk_1` FOREIGN KEY (`blobId`) REFERENCES `core_blob` (`id`),
  ADD CONSTRAINT `notes_note_image_ibfk_2` FOREIGN KEY (`noteId`) REFERENCES `notes_note` (`id`) ON DELETE CASCADE;
community/notes updated from 43 to 44
[community/notes] Running callable function
community/notes updated from 44 to 45
[community/comments] Excuting query: CREATE TABLE `comments_comment_image` (
`commentId` int(11) NOT NULL,
  `blobId` binary(40) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
community/comments updated from 20 to 21
[community/comments] Excuting query: ALTER TABLE `comments_comment_image`
  ADD PRIMARY KEY (`commentId`,`blobId`),
  ADD KEY `blobId` (`blobId`);
community/comments updated from 21 to 22
[community/comments] Excuting query: ALTER TABLE `comments_comment_image`
  ADD CONSTRAINT `comments_comment_image_ibfk_1` FOREIGN KEY (`blobId`) REFERENCES `core_blob` (`id`),
  ADD CONSTRAINT `comments_comment_image_ibfk_2` FOREIGN KEY (`commentId`) REFERENCES `comments_comment` (`id`) ON DELETE CASCADE;
community/comments updated from 22 to 23
[community/comments] Running callable function
community/comments updated from 23 to 24
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` CHANGE `uid` `uid` VARCHAR(512) CHARACTER SET ascii COLLATE ascii_bin NULL DEFAULT NULL, CHANGE `uri` `uri` VARCHAR(512) CHARACTER SET ascii COLLATE ascii_bin NULL DEFAULT NULL;
community/addressbook updated from 49 to 50
[community/addressbook] Excuting query: ALTER TABLE `addressbook_contact` ADD `department` VARCHAR(100) NULL DEFAULT NULL AFTER `jobTitle`;
community/addressbook updated from 50 to 51
[community/addressbook] Running callable function
UPDATE `addressbook_contact` `t`
INNER JOIN `ab_contacts` `old` ON 
 old.id = t.id
SET
	`t`.`department` = old.department
community/addressbook updated from 51 to 52
[core/core] Excuting query: UPDATE `core_customfields_field` SET `type` = 'FunctionField' WHERE `type` = 'Function';
core/core updated from 165 to 166
[core/core] Excuting query: delete FROM `go_holidays` WHERE region like 'en_uk';
core/core updated from 166 to 167
[core/core] Excuting query: CREATE TABLE `core_oauth_access_token` (
`identifier` varchar(128) CHARACTER SET ascii COLLATE ascii_bin NOT NULL,
  `expiryDateTime` datetime DEFAULT NULL,
  `userIdentifier` int(11) NOT NULL,
  `clientId` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
core/core updated from 167 to 168
[core/core] Excuting query: CREATE TABLE `core_oauth_client` (
`id` int(11) NOT NULL,
  `identifier` varchar(128) CHARACTER SET ascii COLLATE ascii_bin NOT NULL,
  `isConfidential` tinyint(1) NOT NULL,
  `name` varchar(128) COLLATE utf8mb4_unicode_ci NOT NULL,
  `redirectUri` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `secret` varchar(128) CHARACTER SET ascii COLLATE ascii_bin DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
core/core updated from 168 to 169
[core/core] Excuting query: ALTER TABLE `core_oauth_access_token`
  ADD PRIMARY KEY (`identifier`),
  ADD KEY `userIdentifier` (`userIdentifier`),
  ADD KEY `clientId` (`clientId`);
core/core updated from 169 to 170
[core/core] Excuting query: ALTER TABLE `core_oauth_client`
  ADD PRIMARY KEY (`id`);
core/core updated from 170 to 171
[core/core] Excuting query: ALTER TABLE `core_oauth_client`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;
core/core updated from 171 to 172
[core/core] Excuting query: ALTER TABLE `core_oauth_access_token`
  ADD CONSTRAINT `core_oauth_access_token_ibfk_2` FOREIGN KEY (`userIdentifier`) REFERENCES `core_user` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `core_oauth_access_token_ibfk_3` FOREIGN KEY (`clientId`) REFERENCES `core_oauth_client` (`id`) ON DELETE CASCADE;
core/core updated from 172 to 173
[community/notes] Excuting query: ALTER TABLE `notes_note_book` CHANGE `fileFolderId` `filesFolderId` INT(11) NULL DEFAULT NULL;
community/notes updated from 45 to 46
[core/core] Excuting query: ALTER TABLE `core_customfields_field` ADD `hiddenInGrid` BOOLEAN NOT NULL DEFAULT TRUE AFTER `options`;
core/core updated from 173 to 174
[core/core] Excuting query: ALTER TABLE `core_entity_filter` ADD `type` ENUM('fixed','variable') NOT NULL DEFAULT 'fixed' AFTER `aclId`;
core/core updated from 174 to 175
[core/core] Excuting query: ALTER TABLE `core_entity_filter` CHANGE `filter` `filter` TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL;
core/core updated from 175 to 176
[community/addressbook] Excuting query: ALTER TABLE `addressbook_user_settings` DROP `sortBy`
community/addressbook updated from 52 to 53
[legacy/billing] Excuting query: ALTER TABLE  `bs_expenses` CHANGE  `invoice_no`  `invoice_no` VARCHAR( 100 ) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '';
legacy/billing updated from 312 to 319
[legacy/postfixadmin] Excuting query: update `pa_mailboxes` set `password` = concat('{PLAIN-MD5}', `password`) WHERE `password` NOT LIKE '{%' AND `password` NOT LIKE '$%'
legacy/postfixadmin updated from 38 to 39
[legacy/files] Excuting query: update fs_folders set acl_id = (select aclId from core_module where name='files' limit 0,1) where parent_id=0;
legacy/files updated from 124 to 126
[core/core] Excuting query: ALTER TABLE `core_customfields_field_set` ADD `columns` TINYINT NOT NULL DEFAULT '2' AFTER `isTab`;
core/core updated from 176 to 177
[legacy/savemailas] Running callable function
legacy/savemailas updated from 9 to 10
[legacy/tickets] Excuting query: update core_search s inner join ti_types t on s.aclId=t.acl_id  set s.aclId = t.search_cache_acl_id
legacy/tickets updated from 159 to 161
[legacy/savemailas] Excuting query: delete el from em_links el where el.id not in (select fromId from core_link l where fromEntityTypeId = (select id from core_entity where name='LinkedEmail')) and el.id not in (select toId from core_link l where toEntityTypeId = (select id from core_entity where name='LinkedEmail')) ;
legacy/savemailas updated from 9 to 11
[legacy/savemailas] Excuting query: delete s from core_search s where s.entityTypeId = (select id from core_entity where name='LinkedEmail') and s.entityId not in (select id from em_links);
legacy/savemailas updated from 11 to 12
[community/addressbook] Excuting query: update `addressbook_contact` set color = null;
community/addressbook updated from 53 to 54
[community/addressbook] Running callable function
UPDATE `addressbook_contact` `t`
INNER JOIN `ab_contacts` `old` ON 
 old.color != "000000" AND old.id = t.id
SET
	`t`.`color` = old.color
UPDATE `addressbook_contact` `t`
INNER JOIN `ab_companies` `old` ON 
 old.color != "000000" AND old.id = (t.id - 11)
SET
	`t`.`color` = old.color
community/addressbook updated from 54 to 55
[core/core] Excuting query: delete FROM `core_search` WHERE aclId not in (select id from core_acl);
core/core updated from 177 to 178
[core/core] Excuting query: ALTER TABLE `core_search` ADD  FOREIGN KEY (`aclId`) REFERENCES `core_acl`(`id`) ON DELETE CASCADE ON UPDATE RESTRICT;
core/core updated from 178 to 179
[core/core] Excuting query: ALTER TABLE `core_email_template` ROW_FORMAT=DYNAMIC;
core/core updated from 179 to 180
[core/core] Excuting query: ALTER TABLE `core_email_template_attachment` ROW_FORMAT=DYNAMIC;
core/core updated from 180 to 181
[core/core] Excuting query: ALTER TABLE `core_search` ROW_FORMAT=DYNAMIC;
core/core updated from 181 to 182
[core/core] Excuting query: ALTER TABLE `core_search` CHANGE `keywords` `keywords` VARCHAR(750) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL;
core/core updated from 182 to 183
[core/core] Excuting query: ALTER TABLE `core_acl` CHANGE `ownedBy` `ownedBy` INT(11) NULL;
core/core updated from 183 to 184
[core/core] Excuting query: update `core_acl` set ownedBy = 1 where ownedBy not in (select id from core_user);
core/core updated from 184 to 185
[core/core] Excuting query: ALTER TABLE `core_acl` ADD FOREIGN KEY (`ownedBy`) REFERENCES `core_user`(`id`) ON DELETE SET NULL ON UPDATE RESTRICT;
core/core updated from 185 to 186
[core/core] Excuting query: UPDATE `core_cron_job` SET `expression` = '0 0 * * *' WHERE `core_cron_job`.`name` = 'GarbageCollection' and moduleId = (select id from core_module where name='core' and package='core')
core/core updated from 186 to 187
[core/core] Excuting query: ALTER TABLE core_customfields_select_option DROP FOREIGN KEY core_customfields_select_option_ibfk_2;
core/core updated from 187 to 188
[legacy/files] Excuting query: ALTER TABLE `fs_files` ADD INDEX(`mtime`);
legacy/files updated from 124 to 127
[legacy/files] Excuting query: ALTER TABLE `fs_files` ADD INDEX(`expire_time`);
legacy/files updated from 127 to 128
Rebuilding cache
Registering all entities
Done!
